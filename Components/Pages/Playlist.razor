@page "/playlist"

<Glass Class="playlist-parent" Blur="20" BackgroundColor="rgba(66, 245, 209,0.1)" Border="2px solid rgba(66, 245, 209,1)">
    
    <div class="playlist-header">
        <div class="library-text">
            <p style="color:white;"><b>Your Library</b></p>
        </div>
        <div class="add-playlist" @onclick="ToggleAddPlayList">
            <img src="./images/plus.svg" height="32" width="32" />
        </div>
    </div>
    <div style="padding : 30px;">
        @foreach(var playlist in UserSetting.Instance.PlayList)
        {
            <PlaylistElement PlaylistName="@playlist.Key"></PlaylistElement>
        }
    </div>
</Glass>

<div>
    <ScrollablePage onCloseAddPlaylistClick="ToggleAddPlayList" IsActive="@isAddPlaylistVisible">
        <div class="scroll-child">
            <div style="height: 10%;">
                <p style="color:white;"><b>Give your playlist a name</b></p>
            </div>
            <div style="height: 30%;" >
                <input @bind="playlistname" class="transparent-input"/>
            </div>
            <div style="height: 10%;">
                <button class="btn" @onclick="AddPlayList">Create</button>
            </div>
            
        </div>
    </ScrollablePage>
</div>

@code {
    private bool isAddPlaylistVisible = false;

    private void ToggleAddPlayList()
    {
        isAddPlaylistVisible = !isAddPlaylistVisible;
        playlistname = GetPlayListDefaultName();
    }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        playlistname = GetPlayListDefaultName();
    }

    private string? playlistname;

    private string GetPlayListDefaultName()
    {
        return "My Playlist " + (UserSetting.Instance.PlayList.Count() + 1).ToString();
    }

    private void AddPlayList()
    {
        UserSetting.Instance.AddPlaylist(playlistname!);
        playlistname = "";
        isAddPlaylistVisible = false;
    }
}

<style>
    .playlist-header {
        height: 50px;
        width: 100%;
        display: flex;
        align-items: center;
    }

    .playlist-parent{
        height: calc(100vh - 136px);
        overflow-y: auto;
    }

    .playlist-header-toggle {
        height: 100%
        width: 100%;
        display: flex;
        align-items: center;
    }

    .library-text{
        width: 50%;
        display: flex;
        justify-content: flex-start;
        margin: 20px;
    }

    .add-playlist{
        width: 50%;
        display: flex;
        justify-content: flex-end;
        margin: 20px;
        cursor: pointer;
    }

    .btn {
        background-color: #3bb63b;
        height: 50px;
        width: 115px;
        border-radius: 27px;
        font-size: 18px;
        font-weight: bold;
    }

    .scroll-child
    {
        height: 56%;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .transparent-input
    {
        width: 70%;
        height: 45px;
        background: transparent;
        border-bottom: 2px solid rgba(66, 245, 209,1);
        color: white;
        font-size: 30px;
        outline: none;
        font-weight: bold;
        text-align: center;
    }
</style>
